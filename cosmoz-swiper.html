<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="swiper-boilerplate.html">

<dom-module id="cosmoz-swiper">
    <template>
        <style include="swiper-boilerplate">
            :host {
                background: #000;
                font-size: 14px;
                color:#000;
                margin: 0;
                padding: 0;
            }
            .swiper-container {
                width: 100%;
                height: 300px;
                margin-left: auto;
                margin-right: auto;
            }
            .swiper-slide {
                background-size: cover;
                background-position: center;
            }
            .gallery-top {
                height: 80%;
                width: 100%;
            }
            .gallery-thumbs {
                height: 20%;
                box-sizing: border-box;
                padding: 10px 0;
            }
            .gallery-thumbs .swiper-slide {
                width: 25%;
                height: 100%;
                opacity: 0.4;
            }
            .gallery-thumbs .swiper-slide-active {
                opacity: 1;
            }
        </style>

        <!-- Swiper -->
        <div class="swiper-container gallery-top">
            <div class="swiper-wrapper">
                <img class="swiper-slide" src="demo/images/strasbourg.jpg" alt="">
                <img class="swiper-slide" src="demo/images/stockholm.jpg" alt="">
                <img class="swiper-slide" src="demo/images/stockholm.jpg" alt="">
                <img class="swiper-slide" src="demo/images/stockholm.jpg" alt="">
                <img class="swiper-slide" src="demo/images/strasbourg.jpg" alt="">
                <img class="swiper-slide" src="demo/images/stockholm.jpg" alt="">
                <img class="swiper-slide" src="demo/images/stockholm.jpg" alt="">
            </div>
            <!-- Add Arrows -->
            <div class="swiper-button-next swiper-button-white"></div>
            <div class="swiper-button-prev swiper-button-white"></div>
        </div>
        <div class="swiper-container gallery-thumbs">
            <div class="swiper-wrapper">
                <img class="swiper-slide" src="demo/images/strasbourg.jpg" alt="">
                <img class="swiper-slide" src="demo/images/stockholm.jpg" alt="">
                <img class="swiper-slide" src="demo/images/stockholm.jpg" alt="">
                <img class="swiper-slide" src="demo/images/stockholm.jpg" alt="">
                <img class="swiper-slide" src="demo/images/strasbourg.jpg" alt="">
                <img class="swiper-slide" src="demo/images/stockholm.jpg" alt="">
                <img class="swiper-slide" src="demo/images/stockholm.jpg" alt="">
            </div>
        </div>
        
    </template>

    <script>
        /*global Swiper*/
        Polymer({
        	is: 'cosmoz-swiper',
        
        	properties: {
        		galleryTop: {
        			type: Object
        		},

        		galleryThumbs: {
        			type: Object
        		}
        	},
        
        	attached() {
        		this.galleryTop = new Swiper(this.$$('.gallery-top'), {
        			spaceBetween: 10,
        			normalizeSlideIndex: false,
        			navigation: {
        				nextEl: this.$$('.swiper-button-next'),
        				prevEl: this.$$('.swiper-button-prev'),
        			},
        			onSlideChangeStart: (swiper) => {
                        // controller.control doesn't seem to work
                        // thats why sync via events
        				this.galleryThumbs.slideTo(swiper.activeIndex);
        			}
        		});
        		this.galleryThumbs = new Swiper(this.$$('.gallery-thumbs'), {
        			spaceBetween: 10,
        			centeredSlides: true,
        			slidesPerView: 'auto',
        			touchRatio: 0.2,
        			slideToClickedSlide: true,
        			onSlideChangeStart: (swiper) => {
                        // controller.control doesn't seem to work
                        // thats why sync via events
        				this.galleryTop.slideTo(swiper.activeIndex);
        			}
        		});
        	}
        });
    </script>
</dom-module>
