<link rel="import" href="../polymer/polymer.html">


<link rel="import" href="../paper-icon-button/paper-icon-button.html">

<link rel="import" href="swiper-boilerplate.html">

<dom-module id="cosmoz-swiper">
    <template>
        <style include="swiper-boilerplate">
            :host {
                background: #000;
                font-size: 14px;
                color:#000;
                margin: 0;
                padding: 0;
            }
            .swiper-container {
                width: 100%;
                height: 300px;
                margin-left: auto;
                margin-right: auto;
            }
            .swiper-slide {
                background-size: cover;
                background-position: center;
            }
            .gallery-top {
                height: 80%;
                width: 100%;
            }
            .gallery-thumbs {
                height: 20%;
                box-sizing: border-box;
                padding: 10px 0;
            }
            .gallery-thumbs .swiper-slide {
                width: 25%;
                height: 100%;
                opacity: 0.4;
            }
            .gallery-thumbs .swiper-slide-active {
                opacity: 1;
            }
            .swiper-button {
                color: #fff;
                height: 48px;
                width: 48px;
                margin-right: -12px;
            }
            .swiper-button-next {
                margin-right: -12px;
            }
            .swiper-button-prev {
                margin-left: -12px;
            }
        </style>

        <!-- Swiper -->
        <div class="swiper-container gallery-top">
            <div class="swiper-wrapper">
                <template is="dom-repeat" items="[[images]]" as="image">
                    <img class="swiper-slide" src$="[[image]]">
                </template>
            </div>
            <!-- Add Arrows -->
            <paper-icon-button class="swiper-button swiper-button-next" icon="icons:arrow-forward"></paper-icon-button>
            <paper-icon-button class="swiper-button swiper-button-prev" icon="icons:arrow-back"></paper-icon-button>
        </div>
        <div class="swiper-container gallery-thumbs">
            <div class="swiper-wrapper">
                <template is="dom-repeat" items="[[images]]" as="image">
                    <img class="swiper-slide" src$="[[image]]">
                </template>
            </div>
        </div>
    </template>

    <script>
        /*global Swiper*/
        Polymer({
        	is: 'cosmoz-swiper',
        
        	properties: {
        		galleryTop: {
        			type: Object
        		},

        		galleryThumbs: {
        			type: Object
        		},
        
        		images: {
        			type: Array,
        			value() {
        				return [
        					'images/stockholm.jpg',
        					'images/strasbourg.jpg',
        					'images/stockholm.jpg',
        					'images/strasbourg.jpg'
        				];
        			}
        		}
        	},
        
        	attached() {
        		this.galleryTop = new window.Swiper(this.$$('.gallery-top'), {
        			spaceBetween: 10,
        			normalizeSlideIndex: false,
        			nextButton: this.$$('.swiper-button-next'),
        			prevButton: this.$$('.swiper-button-prev'),
        			onSlideChangeStart: (swiper) => {
                        // controller.control doesn't seem to work
                        // thats why sync via events
        				this.galleryThumbs.slideTo(swiper.activeIndex);
        			}
        		});
        		this.galleryThumbs = new window.Swiper(this.$$('.gallery-thumbs'), {
        			spaceBetween: 10,
        			centeredSlides: true,
        			slidesPerView: 'auto',
        			touchRatio: 0.2,
        			slideToClickedSlide: true,
        			onSlideChangeStart: (swiper) => {
                        // controller.control doesn't seem to work
                        // thats why sync via events
        				this.galleryTop.slideTo(swiper.activeIndex);
        			}
        		});
        	}
        });
    </script>
</dom-module>
